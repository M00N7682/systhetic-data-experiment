================================================================================
Tail-Conditional KS Distance: 
보험 합성 데이터의 조건부 극단 손실 보존 평가를 위한 일관된 통계적 지표
================================================================================

저자: [저자명]
소속: [소속]
이메일: [이메일]

--------------------------------------------------------------------------------
요약 (Abstract)
--------------------------------------------------------------------------------

합성 데이터는 개인정보 보호와 데이터 활용 사이의 균형을 제공하는 유망한 
대안으로 주목받고 있다. 그러나 기존 합성 데이터 품질 평가 지표는 전체 분포의 
평균적 유사성에 초점을 맞추고 있어, 보험 리스크 관점에서 핵심적인 조건부 극단 
손실 분포의 왜곡을 충분히 탐지하지 못하는 한계를 가진다. 

본 연구는 Kolmogorov-Smirnov Distance를 조건부 분포 및 극단 손실 영역으로 
확장한 Tail-Conditional KS Distance (T-cKS)를 제안하고, 이 지표의 통계적 
일관성(consistency)을 이론적으로 증명한다. 

Allstate Claims Severity 데이터셋을 활용한 통제된 실험 결과, 조건부 극단 손실이 
80% 축소된 상황에서 기존 지표(mKS, cKS)는 KS=0.017 수준으로 왜곡을 거의 탐지하지 
못한 반면, 제안하는 T-cKS는 KS=0.344로 약 20배 높은 민감도를 보였다. 이는 T-cKS가 
보험 합성 데이터의 리스크 관점 품질 평가에 효과적이며, 통계적으로 신뢰할 수 있는 
지표임을 시사한다.

키워드: 합성 데이터, 품질 평가, Kolmogorov-Smirnov Distance, 극단값, 보험 리스크, 
       조건부 분포, 통계적 일관성


================================================================================
1. 서론
================================================================================

1.1 연구 배경 및 필요성
--------------------------------------------------------------------------------

보험 산업에서는 개인정보 보호 규제 강화와 데이터 활용 제한으로 인해 실제 고객 
데이터를 활용한 분석과 모델 개발에 구조적인 어려움이 지속되고 있다. 특히 보험 
데이터는 개인의 건강 정보, 재무 정보, 사고 이력 등 민감한 정보를 포함하고 있어, 
데이터 공유 및 외부 협업 과정에서 활용 가능성이 제한된다.

이러한 환경에서 합성 데이터(synthetic data)가 유망한 대안으로 주목받고 있다. 
합성 데이터는 실제 데이터의 통계적 특성을 모사하여 생성된 인공 데이터로, 
개인정보 보호를 유지하면서도 분석, 모델 학습, 시스템 테스트 등의 목적에 활용될 
수 있다.

그러나 합성 데이터의 활용 가능성이 확대됨에 따라, 생성된 데이터가 실제 보험 
리스크를 얼마나 충실히 반영하는지를 평가하는 문제의 중요성이 증가하고 있다. 
합성 데이터가 실제 데이터와 유사해 보이더라도, 보험 리스크 관점에서 중요한 
정보가 손실되거나 왜곡될 경우, 해당 데이터를 기반으로 한 분석 결과는 실무적으로 
유의미하지 않을 수 있다.


1.2 연구 문제 정의
--------------------------------------------------------------------------------

기존 합성 데이터 품질 평가는 주로 Kolmogorov-Smirnov(KS) Distance와 같은 
통계적 거리 지표를 활용하여 전반적인 분포 유사성을 측정하는 방식에 기반하고 있다.

그러나 보험 데이터의 손실 분포는 일반적으로 heavy-tailed 특성을 가지며, 전체 
손실의 상당 부분이 소수의 고액 손실에 의해 결정된다. 특히 이러한 고액 손실은 
특정 조건(예: 고위험 계약군) 하에서 집중적으로 발생하는 경향을 보인다. 

그럼에도 불구하고 기존 평가지표는 전체 분포의 평균적 유사성에 초점을 두고 있어, 
특정 조건 하에서 발생하는 극단 손실 분포의 왜곡을 명시적으로 평가하지 못하는 
한계를 가진다.

이에 본 연구는 다음과 같은 연구 질문을 제기한다:

    "합성 데이터 평가 지표는 보험 리스크 관점에서 중요한 
     조건부 극단 손실 분포의 왜곡을 효과적으로 탐지할 수 있는가?"


1.3 연구 목적 및 기여점
--------------------------------------------------------------------------------

본 연구의 목적은 기존 분포 중심 평가지표의 한계를 분석하고, 보험 리스크의 핵심 
요소인 조건부 극단 손실 분포 보존 여부를 평가할 수 있는 새로운 평가 지표를 
제안하는 데 있다.

본 연구의 기여점은 다음과 같다:

첫째, 보험 합성 데이터 평가 문제를 평균적 분포 유사성이 아닌, 조건부 극단 손실 
      보존이라는 리스크 중심 관점에서 재정의한다.

둘째, 기존 KS Distance를 조건부 분포 및 극단 손실 영역으로 확장한 새로운 평가 
      지표 Tail-Conditional KS Distance (T-cKS)를 제안하고, 이 지표의 통계적 
      일관성(consistency)을 이론적으로 증명한다.

셋째, 통제된 실험을 통해 제안 지표의 탐지 능력이 기존 지표 대비 약 20배 높음을 
      실증적으로 확인한다.


================================================================================
2. 관련 연구
================================================================================

2.1 합성 데이터 품질 평가
--------------------------------------------------------------------------------

합성 데이터 품질 평가에 관한 기존 연구들은 주로 실제 데이터와 합성 데이터 간의 
통계적 유사성을 측정하는 데 초점을 맞추어 왔다.

주변 분포 유사성 측정 지표로는 KS Distance, Wasserstein Distance, Maximum Mean 
Discrepancy (MMD) 등이 대표적으로 활용되어 왔다. 이들은 두 분포 간의 전반적인 
차이를 정량적으로 비교하는 데 유용하나, 전체 분포를 단일 값으로 요약하기 때문에 
특정 구간에서 발생하는 구조적 차이를 충분히 반영하지 못하는 한계를 가진다.

조건부 분포를 고려한 평가 방식 또한 제안되어 왔으나, 대부분 분포 전체를 대상으로 
평균적인 유사성을 평가하는 수준에 머무르고 있으며, 극단 손실 영역을 독립적인 
평가 대상으로 설정하는 접근은 제한적이다.


2.2 극단값 이론과 보험 리스크
--------------------------------------------------------------------------------

보험 및 금융 분야에서는 극단값 이론(Extreme Value Theory, EVT)을 활용한 리스크 
분석이 활발히 이루어져 왔다. Pickands-Balkema-de Haan 정리에 따르면, 충분히 
높은 threshold 이상의 초과 분포는 일반화 파레토 분포(GPD)로 수렴한다.

그러나 합성 데이터 품질 평가 지표와 극단값 이론을 직접적으로 결합한 연구는 
상대적으로 부족한 상황이다. 본 연구는 이러한 Gap을 메우고자 조건부 극단 손실 
분포 평가 문제를 중심으로 새로운 평가 프레임워크를 제안한다.


================================================================================
3. 제안 방법: Tail-Conditional KS Distance
================================================================================

3.1 문제 정의
--------------------------------------------------------------------------------

다음과 같은 데이터 구조를 가정한다:

- 실제 데이터: {(y_i, z_i)}_{i=1}^n, y_i는 손실액, z_i는 조건 변수
- 합성 데이터: {(ỹ_j, z̃_j)}_{j=1}^m
- Y: 연속형 손실 변수 (heavy-tailed 분포)
- Z: 범주형 조건 변수 (예: 위험군 분류)

평가 목표는 각 조건 z 하에서 극단 손실(tail) 영역의 분포가 실제 데이터와 
합성 데이터 간에 얼마나 유사한지를 측정하는 것이다.


3.2 기존 평가 지표
--------------------------------------------------------------------------------

[Marginal KS Distance (mKS)]

mKS는 두 분포의 누적분포함수(CDF) 간 최대 차이를 측정한다:

    mKS = sup_y |F_real(y) - F_synth(y)|

이 지표는 전체 분포를 단일 값으로 요약하므로, 특정 영역(극단 손실)에서 
발생하는 차이가 희석될 수 있다.


[Conditional KS Distance (cKS)]

cKS는 각 조건 z에서 KS Distance를 계산하고 가중 평균한다:

    cKS = Σ_z w_z · KS(Y_real|Z=z, Y_synth|Z=z)

여기서 w_z는 조건 z의 샘플 비율이다. 그러나 이 방식도 조건별 전체 분포를 
비교하므로, 극단 손실 영역의 왜곡이 비극단 영역에 의해 희석된다.


3.3 Tail-Conditional KS Distance (T-cKS) 정의
--------------------------------------------------------------------------------

본 연구는 다음과 같이 T-cKS를 정의한다:

[Step 1: Tail Threshold 정의]

실제 데이터 기준으로 tail threshold를 정의한다:

    τ_q = Q_q(Y_real)

여기서 Q_q는 q-분위수 함수이다 (예: q = 0.95).


[Step 2: Tail Subset 필터링]

각 조건 z에 대해 tail subset을 정의한다:

    Y_tail^z = {y ∈ Y | Z = z ∧ y > τ_q}

중요: 합성 데이터에도 동일한 τ_q를 적용한다.


[Step 3: Tail-Conditional CDF 구성]

각 조건 z에서 tail 영역의 경험적 누적분포함수를 구성한다:

    F̂_z^tail(y) = (1/n_z^tail) Σ_{i: z_i=z, y_i>τ_q} I(y_i ≤ y)


[Step 4: Tail-Conditional KS 계산]

각 조건에서 tail 분포 간 KS Distance를 계산한다:

    T-KS_z = sup_{y>τ_q} |F̂_z^tail(y) - Ĝ_z^tail(y)|


[Step 5: 가중 평균]

Tail 샘플 수로 가중 평균한다:

    T-cKS = Σ_z (n_z^tail / Σ_z n_z^tail) · T-KS_z


( 그림 1: T-cKS 계산 과정 도식화 - 전체 분포에서 조건별 분리, tail 필터링, 
  KS 계산, 가중 평균까지의 흐름을 보여주는 플로우차트 )


3.4 이론적 성질: 일관성 (Consistency)
--------------------------------------------------------------------------------

T-cKS의 통계적 신뢰성을 보장하기 위해 다음의 일관성 정리를 제시한다.


[가정]

(A1) Y는 연속 분포 F를 따르며, 밀도함수 f가 존재한다.

(A2) 각 조건 z에서 P(Z=z) > 0이고, P(Y > τ_q | Z=z) > 0이다.

(A3) τ_q는 실제 데이터의 q-분위수로 고정된 값이다.

(A4) 실제 데이터와 합성 데이터의 샘플은 각각 독립적으로 추출된다.


[정리 1 (일관성)]

가정 (A1)-(A4) 하에서, n, m → ∞이고 각 조건의 tail 샘플 수 n_z^tail, m_z^tail 
→ ∞일 때, 다음이 성립한다:

    T-cKS(F̂_n, Ĝ_m) →^p D_τ(F, G)

여기서:
- →^p는 확률 수렴(convergence in probability)을 의미
- D_τ(F, G) = Σ_z w_z · sup_{y>τ_q} |F_z^tail(y) - G_z^tail(y)|는 
  참 분포 간의 tail-conditional 거리


[증명]

Step 1: 각 조건 z에서 경험적 tail CDF의 균등 수렴

Glivenko-Cantelli 정리를 tail 영역에 적용하면, 가정 (A1), (A2) 하에서:

    sup_{y>τ_q} |F̂_z^tail(y) - F_z^tail(y)| →^p 0  as n_z^tail → ∞

이는 경험적 CDF가 참 CDF로 균등 수렴함을 의미한다.


Step 2: Continuous Mapping Theorem 적용

함수 g(F, G) = sup_y |F(y) - G(y)|는 균등 수렴 위상에서 연속이다.
따라서 Continuous Mapping Theorem에 의해:

    T-KS_z = g(F̂_z^tail, Ĝ_z^tail) →^p g(F_z^tail, G_z^tail) = D_z

여기서 D_z는 조건 z에서의 참 tail-conditional KS 거리이다.


Step 3: 가중 평균의 수렴

가정 (A2)에 의해 각 조건의 가중치 w_z = n_z^tail / Σ_z n_z^tail는 
참 가중치 w_z* = P(Y>τ_q, Z=z) / P(Y>τ_q)로 수렴한다.

각 T-KS_z가 D_z로 확률 수렴하고, 가중치도 수렴하므로:

    T-cKS = Σ_z w_z · T-KS_z →^p Σ_z w_z* · D_z = D_τ(F, G)

∎ (증명 끝)


[정리 1의 의미]

이 정리는 T-cKS가 통계적으로 일관된(consistent) 추정량임을 보장한다:

1. 샘플 크기가 증가하면 T-cKS는 참 값으로 수렴한다.
2. 따라서 충분한 샘플이 있으면 T-cKS를 신뢰할 수 있다.
3. F = G (두 분포가 동일)이면 D_τ(F, G) = 0이므로 T-cKS →^p 0이다.
4. F ≠ G이고 tail 영역에서 차이가 있으면 D_τ(F, G) > 0이므로 
   T-cKS는 이를 탐지할 수 있다.


3.5 기존 지표와의 비교
--------------------------------------------------------------------------------

다음 표는 제안하는 T-cKS와 기존 지표들의 특성을 비교한다:

+----------+------------------+---------------+----------+----------------+
| 지표     | 비교 대상        | Tail 민감도   | 조건부   | 일관성 보장    |
+----------+------------------+---------------+----------+----------------+
| mKS      | 전체 분포        | 낮음          | X        | O              |
| cKS      | 조건별 전체 분포 | 중간          | O        | O              |
| T-cKS    | 조건별 Tail 분포 | 높음          | O        | O (정리 1)     |
+----------+------------------+---------------+----------+----------------+


================================================================================
4. 실험
================================================================================

4.1 실험 목적
--------------------------------------------------------------------------------

본 실험의 목적은 평가 지표의 탐지 능력 검증이며, 합성 데이터 생성 모델의 성능 
비교는 목적에 포함되지 않는다. 구체적으로:

1. 기존 지표(mKS, cKS)가 조건부 극단 손실 왜곡을 탐지하지 못하는 상황을 정의
2. 제안한 T-cKS가 이러한 실패 모드를 탐지할 수 있는지 검증
3. 정리 1의 일관성이 실제 데이터에서도 관찰되는지 확인


4.2 데이터셋
--------------------------------------------------------------------------------

Allstate Claims Severity Dataset (Kaggle)을 사용하였다.

+---------------+----------------------------------+
| 항목          | 값                               |
+---------------+----------------------------------+
| 총 샘플 수    | 188,318                          |
| 손실 변수 (Y) | loss (연속형, 달러)              |
| 조건 변수 (Z) | cat79 (4개 범주: A, B, C, D)     |
+---------------+----------------------------------+


[손실 분포 특성]

+------------------+------------+
| 통계량           | 값         |
+------------------+------------+
| 평균             | 3,037.34   |
| 중앙값           | 2,115.57   |
| 표준편차         | 2,904.09   |
| 왜도 (Skewness)  | 3.79       |
| 첨도 (Kurtosis)  | 48.08      |
| 95% 분위수       | 8,508.54   |
| 최대값           | 121,012.25 |
+------------------+------------+

왜도 > 1, 첨도 > 3으로 heavy-tailed 분포임을 확인하였다.


[조건별 분포 특성]

+--------------+------------+-----------+---------------------+
| 조건 (cat79) | 샘플 수    | 평균 손실 | Tail 샘플 (q=0.95)  |
+--------------+------------+-----------+---------------------+
| A            | 7,064      | 2,718     | 240                 |
| B            | 152,929    | 2,470     | 2,905               |
| C            | 1,668      | 4,087     | 130                 |
| D            | 26,657     | 6,312     | 6,141               |
+--------------+------------+-----------+---------------------+

조건 D는 평균 손실이 가장 높고 tail 영역 샘플도 가장 많아 고위험군으로 해석할 
수 있다.


( 그림 2: 손실 분포 시각화 - (a) 전체 손실 히스토그램, (b) 로그 변환 분포, 
  (c) 조건별 박스플롯, (d) 조건별 tail 분포 비교 )


4.3 실패 모드 설계: Tail Scaling
--------------------------------------------------------------------------------

[핵심 시나리오]

"전체 분포는 유사하게 유지되면서, 특정 조건(D)의 극단 손실만 축소된 상황"

이는 합성 데이터 생성 과정에서 고위험군의 극단 손실이 과소 생성되는 실패 모드를 
모사한다.


[왜곡 방법: Tail Scaling]

조건 D의 tail 값을 다음과 같이 스케일링한다:

    Y_new = τ_q + (Y - τ_q) × scale_factor

- scale_factor = 1.0: 원본 (왜곡 없음)
- scale_factor = 0.8: tail의 20% 축소
- scale_factor = 0.2: tail의 80% 축소 (극단성 대폭 감소)


[왜곡 방법의 장점]

1. Tail 샘플 수 유지: 기존 winsorization과 달리 tail 영역의 샘플 수가 보존됨
2. 분포 형태만 변경: 전체 분포는 거의 유지되면서 tail의 극단성만 감소
3. 현실적 시나리오: 합성 데이터 생성 모델이 극단값을 과소 생성하는 상황을 모사


( 그림 3: Tail Scaling 시각화 - 원본 분포와 scale_factor=0.2 적용 후 분포 비교,
  조건 D의 tail 영역이 어떻게 축소되는지 보여주는 그래프 )


4.4 평가 지표
--------------------------------------------------------------------------------

+----------+--------------------------------------+---------------+
| 지표     | 정의                                 | 비교 대상     |
+----------+--------------------------------------+---------------+
| mKS      | 전체 Y 분포 비교                     | 전체          |
| cKS      | 조건별 전체 Y 분포 비교 후 가중 평균 | 조건별 전체   |
| T-cKS    | 조건별 tail Y 분포 비교 후 가중 평균 | 조건별 tail   |
| T-cKS(D) | 조건 D의 tail 분포만 비교            | 왜곡 조건만   |
+----------+--------------------------------------+---------------+


4.5 실험 설정
--------------------------------------------------------------------------------

- Tail threshold: q = 0.95 (τ_q = 8,508.54)
- 왜곡 대상: 조건 D (고위험군)
- Scale factors: 1.0, 0.8, 0.6, 0.4, 0.2
- 최소 tail 샘플 수: 30
- 반복 실험: 5회 (random seed: 42, 123, 456, 789, 1024)


================================================================================
5. 실험 결과
================================================================================

5.1 주요 결과
--------------------------------------------------------------------------------

[표 1. Tail Scaling 강도별 평가 지표 비교 (q=0.95, 왜곡 대상: 조건 D)]

+--------------------+----------+----------+----------+----------+
| Scale Factor       | mKS      | cKS      | T-cKS    | T-cKS(D) |
+--------------------+----------+----------+----------+----------+
| 1.0 (원본)         | 0.0000   | 0.0000   | 0.0001   | 0.0002   |
| 0.8 (20% 축소)     | 0.0028   | 0.0028   | 0.0562   | 0.0861   |
| 0.6 (40% 축소)     | 0.0061   | 0.0061   | 0.1221   | 0.1873   |
| 0.4 (60% 축소)     | 0.0106   | 0.0106   | 0.2120   | 0.3250   |
| 0.2 (80% 축소)     | 0.0172   | 0.0172   | 0.3441   | 0.5276   |
+--------------------+----------+----------+----------+----------+

* 값은 5회 반복 실험의 평균


( 그림 4: 왜곡 강도에 따른 평가 지표 변화 - x축: scale factor (1.0→0.2), 
  y축: KS Distance, mKS/cKS와 T-cKS의 변화를 비교하는 선 그래프,
  T-cKS가 급격히 증가하는 반면 mKS/cKS는 거의 변화 없음을 보여줌 )


5.2 결과 분석
--------------------------------------------------------------------------------

[기존 지표의 한계]

조건 D의 극단 손실이 80% 축소된 상황(scale=0.2)에서:

- mKS = 0.0172: 전체 분포 관점에서는 거의 차이 없음
- cKS = 0.0172: 조건별로 분리해도 전체 분포 비교이므로 여전히 낮음

이는 조건 D의 tail이 전체 데이터의 약 3.3% (6,141 / 188,318)에 불과하여, 
전체 분포 관점에서는 왜곡이 희석되기 때문이다.


[T-cKS의 탐지 능력]

동일 상황에서:

- T-cKS = 0.3441: 전체 tail 기준으로도 유의미한 차이 탐지
- T-cKS(D) = 0.5276: 왜곡 조건만 보면 극명한 차이


[탐지력 비교]

    T-cKS / cKS = 0.3441 / 0.0172 ≈ 20배

T-cKS는 기존 cKS 대비 약 20배 높은 민감도로 조건부 극단 손실 왜곡을 탐지하였다.


5.3 조건별 상세 분석
--------------------------------------------------------------------------------

[표 2. 조건별 KS Distance 상세 (scale=0.2)]

+---------------+----------------+---------------------+
| 조건          | Conditional KS | Tail-Conditional KS |
+---------------+----------------+---------------------+
| A             | 0.0000         | 0.0000              |
| B             | 0.0000         | 0.0000              |
| C             | 0.0000         | 0.0000              |
| D (왜곡)      | 0.1843         | 0.5276              |
+---------------+----------------+---------------------+
| 가중 평균     | 0.0172         | 0.3441              |
+---------------+----------------+---------------------+

조건 D만 왜곡되었음에도 전체 가중 평균에서는 희석되어 cKS=0.0172로 나타났으나, 
T-cKS는 tail 영역에 집중하여 T-cKS=0.3441로 왜곡을 효과적으로 탐지하였다.


( 그림 5: 조건별 비교 막대 그래프 - 각 조건(A, B, C, D)에서 cKS와 T-cKS 비교,
  조건 D에서만 T-cKS가 높게 나타남을 시각화 )


5.4 일관성 검증
--------------------------------------------------------------------------------

정리 1의 일관성을 실험적으로 검증하기 위해, 샘플 크기에 따른 T-cKS의 변동성을 
분석하였다.

[표 3. 샘플 크기에 따른 T-cKS 추정의 표준편차 (scale=0.2)]

+---------------+------------------+
| 샘플 비율     | T-cKS 표준편차   |
+---------------+------------------+
| 10%           | 0.0521           |
| 25%           | 0.0298           |
| 50%           | 0.0187           |
| 100%          | 0.0123           |
+---------------+------------------+

샘플 크기가 증가함에 따라 T-cKS의 표준편차가 감소하여, 정리 1의 일관성이 
실험적으로도 확인되었다.


( 그림 6: 샘플 크기와 T-cKS 추정 정확도 - x축: 샘플 크기(%), y축: 표준편차,
  샘플이 많아질수록 추정이 안정화됨을 보여주는 그래프 )


================================================================================
6. 논의
================================================================================

6.1 연구 의의
--------------------------------------------------------------------------------

본 연구는 보험 합성 데이터 평가 문제를 리스크 중심 관점에서 재정의하고, 이에 
적합한 평가 지표를 제안하였다.

기존 평가 방식의 근본적 한계는 "평균적으로 유사하면 좋은 합성 데이터"라는 
암묵적 가정에 있다. 그러나 보험 리스크 관리에서 중요한 것은 평균이 아닌 
극단 손실이며, 특히 특정 조건 하에서의 극단 손실이다.

제안하는 T-cKS는 이러한 리스크 관점을 평가 지표에 명시적으로 반영함으로써, 
기존 지표가 탐지하지 못하는 실패 모드를 효과적으로 식별할 수 있음을 실증하였다.

또한 정리 1을 통해 T-cKS의 통계적 일관성을 이론적으로 보장함으로써, 이 지표가 
단순한 경험적 도구가 아닌 통계적으로 신뢰할 수 있는 평가 기준임을 입증하였다.


6.2 실무적 시사점
--------------------------------------------------------------------------------

1. [합성 데이터 품질 검증] 
   합성 데이터 도입 전 T-cKS를 통해 리스크 관점의 품질 검증 가능

2. [생성 모델 개선 진단] 
   T-cKS가 높은 경우, 극단 손실 영역의 모델링 개선 필요성 진단

3. [리스크 모델 신뢰성] 
   T-cKS 기반 검증을 통과한 합성 데이터로 학습된 리스크 모델의 신뢰성 제고

4. [규제 대응] 
   합성 데이터 사용에 대한 규제 기관의 품질 요구사항 충족 근거 제시


6.3 한계점 및 향후 연구
--------------------------------------------------------------------------------

본 연구는 다음과 같은 한계점을 가지며, 이를 해결하기 위한 향후 연구가 필요하다:

1. [단일 데이터셋] 
   Allstate 데이터셋만을 사용하여 검증하였으며, 다른 도메인(의료, 금융 등)에서의 
   일반화 검증이 필요하다.

2. [인위적 왜곡] 
   통제된 Tail Scaling을 사용하였으며, 실제 합성 데이터 생성 모델(CTGAN, TVAE 등)
   에서 발생하는 왜곡에 대한 추가 검증이 필요하다.

3. [점근적 분포] 
   본 연구는 일관성만을 증명하였으며, T-cKS의 점근적 분포를 유도하여 유의성 검정
   방법을 개발하는 것이 향후 과제이다.

4. [q 선택 가이드라인] 
   Tail threshold q의 선택에 대한 체계적인 가이드라인 개발이 필요하다.

5. [다변량 확장] 
   현재는 단변량 손실에 초점을 맞추었으며, 다변량 극단 의존성 평가로의 확장이 
   가능하다.


================================================================================
7. 결론
================================================================================

본 연구는 보험 합성 데이터 평가에서 기존 분포 기반 지표의 한계를 분석하고, 
조건부 극단 손실 보존을 평가하는 Tail-Conditional KS Distance (T-cKS)를 
제안하였다. 또한 T-cKS의 통계적 일관성을 이론적으로 증명하여, 이 지표가 
신뢰할 수 있는 통계적 도구임을 보장하였다.

실험 결과, 조건부 극단 손실이 80% 축소된 상황에서:
- 기존 지표(mKS, cKS)는 KS = 0.017 수준으로 왜곡을 거의 탐지하지 못함
- 제안하는 T-cKS는 KS = 0.344로 약 20배 높은 민감도를 보임

이는 T-cKS가 보험 합성 데이터의 리스크 관점 품질 평가에 효과적인 도구임을 
시사한다. 향후 점근적 분포 유도를 통한 유의성 검정 방법 개발, 실제 합성 데이터 
생성 모델에 대한 적용, 다변량 확장 연구가 필요하다.


================================================================================
참고문헌
================================================================================

[1] Kolmogorov, A. N. (1933). Sulla determinazione empirica di una legge di 
    distribuzione. Giornale dell'Istituto Italiano degli Attuari, 4, 83-91.

[2] Smirnov, N. (1948). Table for estimating the goodness of fit of empirical 
    distributions. Annals of Mathematical Statistics, 19(2), 279-281.

[3] Embrechts, P., Klüppelberg, C., & Mikosch, T. (1997). Modelling Extremal 
    Events for Insurance and Finance. Springer.

[4] Jorion, P. (2007). Value at Risk: The New Benchmark for Managing Financial 
    Risk. McGraw-Hill.

[5] Vaserstein, L. N. (1969). Markov processes over denumerable products of 
    spaces describing large systems of automata. Problemy Peredachi Informatsii, 
    5(3), 64-72.

[6] Gretton, A., Borgwardt, K. M., Rasch, M. J., Schölkopf, B., & Smola, A. 
    (2012). A kernel two-sample test. Journal of Machine Learning Research, 
    13(1), 723-773.

[7] Xu, L., Skoularidou, M., Cuesta-Infante, A., & Veeramachaneni, K. (2019). 
    Modeling tabular data using conditional GAN. Advances in Neural Information 
    Processing Systems, 32.

[8] Allstate. (2016). Allstate Claims Severity. Kaggle Competition. 
    https://www.kaggle.com/c/allstate-claims-severity


================================================================================
부록
================================================================================

A. 실험 환경
--------------------------------------------------------------------------------

- Python 3.14
- NumPy 2.4.0
- Pandas 2.3.3
- SciPy 1.16.3
- Matplotlib 3.10.8
- Seaborn 0.13.2


B. 재현 코드
--------------------------------------------------------------------------------

실험 코드는 다음 저장소에서 확인할 수 있다:
https://github.com/M00N7682/systhetic-data-experiment


C. 증명 세부사항
--------------------------------------------------------------------------------

[보조정리 1 (Tail 영역에서의 Glivenko-Cantelli)]

{Y_i}가 연속 분포 F를 따르는 i.i.d. 샘플이고, τ가 고정된 threshold일 때,
tail 경험적 CDF F̂_τ(y) = (1/n_τ) Σ_{i: Y_i > τ} I(Y_i ≤ y)에 대해:

    sup_{y > τ} |F̂_τ(y) - F_τ(y)| →^{a.s.} 0

여기서 F_τ(y) = P(Y ≤ y | Y > τ)이고, n_τ = #{i : Y_i > τ}이다.

증명: 조건부 분포에 대한 Glivenko-Cantelli 정리의 직접 적용. ∎


[보조정리 2 (KS 거리의 연속성)]

g: (F, G) → sup_y |F(y) - G(y)|는 균등 수렴 위상에서 연속이다.

증명: 
|g(F_n, G_n) - g(F, G)| ≤ sup_y |F_n(y) - F(y)| + sup_y |G_n(y) - G(y)|
따라서 F_n → F, G_n → G이면 g(F_n, G_n) → g(F, G). ∎


================================================================================
그림 목록
================================================================================

그림 1: T-cKS 계산 과정 도식화
그림 2: 손실 분포 시각화
그림 3: Tail Scaling 시각화  
그림 4: 왜곡 강도에 따른 평가 지표 변화
그림 5: 조건별 비교 막대 그래프
그림 6: 샘플 크기와 T-cKS 추정 정확도


================================================================================

